###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

# -- Provide portal base address.
portalAddress: "https://portal.example.org"

# -- Provide portal-backend base address.
portalBackendAddress: "https://portal-backend.example.org"

# -- Provide details about centralidp (CX IAM) Keycloak instance.
centralidp:
  # -- Provide centralidp base address, without trailing '/auth'.
  address: "https://centralidp.example.org"
  realm: "CX-Central"
  clients:
    portal: "Cl2-CX-Portal"
    registration: "Cl1-CX-Registration"
    semantic: "Cl3-CX-Semantic"
    miw: "Cl5-CX-Custodian"
    bpdm: "Cl7-CX-BPDM"
    technicalRolesManagement: "technical_roles_management"
    issuerComponent: "Cl24-CX-SSI-CredentialIssuer"

# -- Provide sharedidp address (CX IAM), without trailing '/auth'.
sharedidpAddress: "https://sharedidp.example.org"

# -- Provide semantics base address.
semanticsAddress: "https://semantics.example.org"

# -- Provide details about business partner data management (BPDM).
bpdm:
  # -- Provide bpdm partners pool base address.
  poolAddress: "https://business-partners.example.org"
  # -- Provide bpdm pool api path.
  poolApiPath: "/pool/v6"
  # -- Provide bpdm portal gate base address.
  portalGateAddress: "https://business-partners.example.org"
  # -- Provide bpdm portal gate api path.
  portalGateApiPath: "/companies/test-company/v6"

# -- Provide custodian base address.
custodianAddress: "https://managed-identity-wallets.example.org"

# -- Provide sdfactory base address.
sdfactoryAddress: "https://sdfactory.example.org"

# -- if error code is set, the sd document creation will be skipped if clearing house is sending failure including this error code in the response
clearinghouseConnectorAllowSdDocumentSkipErrorCode: "E2010"

clearinghouse:
  # -- Provide the configuration of the default clearing house
  default:
    countryAlpha2Code: "default"
    scope: "openid"
    grantType: "client_credentials"
    # -- Provide clearinghouse base address.
    baseAddress: "https://default.example.org"
    # -- Provide clearinghouse api path.
    apiPath: "/api/v2/validation"
    # -- Provide clearinghouse client-id from clearinghouse IAM.
    clientId: "clearinghouse-client-id-default"
    # -- Provide clearinghouse client-secret from clearinghouse IAM.
    clientSecret: ""
    # -- Provide default clearinghouse token address.
    tokenAddress: "https://default.example.org/realms/example/protocol/openid-connect/token"
    # -- if set to true the self description document creation will be skipped for company registrations as well as connector registrations
    clearinghouseConnectDisabled: false

  # -- Provide the configuration for regional clearing houses
  regional: []
    ## Optional list of clearinghouse configurations for different countries
    # - countryAlpha2Code: "CN"
    #   scope: "openid"
    #   grantType: "client_credentials"
    #   # -- Provide clearinghouse base address.
    #   baseAddress: "https://cn.example.org"
    #   # -- Provide clearinghouse api path.
    #   apiPath: "/api/v2/validation"
    #   # -- Provide clearinghouse client-id from clearinghouse IAM.
    #   clientId: "clearinghouse-client-id-cn"
    #   # -- Provide clearinghouse client-secret from clearinghouse IAM.
    #   clientSecret: ""
    #   # -- Provide default clearinghouse token address.
    #   tokenAddress: "https://cn.example.org/realms/example/protocol/openid-connect/token"
    #   # -- if set to true the self description document creation will be skipped for company registrations as well as connector registrations
    #   clearinghouseConnectDisabled: false

# -- Provide issuer component base address
issuerComponentAddress: "https://ssi-credential-issuer.example.org"

# -- Provide details about the BPN DID Resolver.
bpnDidResolver:
  # -- Provide management api base address
  managementApiAddress: "http://bpn-did-resolution-service-bdrs-server:8081"
  # -- Provide directory api address
  directoryApiAddress: "https://bpn-did-resolution-service.example.org/api/directory"

# -- Provide the configuration of the dim wrapper address
dimWrapper:
  # -- Provide the dim base address
  baseAddress: "https://dim.example.org"
  # -- Provide the api path
  apiPath: "/api/dim"
  # -- Provide dim token address.
  tokenAddress: "https://keycloak.example.org/realms/example/protocol/openid-connect/token"

decentralIdentityManagementAuthAddress: "https://dis-integration-service-prod.eu10.dim.cloud.sap/api/v2.0.0/iatp/catena-x-portal"

# -- Set information related to the operator company
operator:
  # -- The bpn of the operator
  bpn: "BPNL00000003CRHK"
  # -- The name of the operator
  name: "Catena-X"
  # -- The shortname of the operator
  shortname: "Catena-X"
  # -- The city of the operator address
  city: "Munich"
  # --The region of the operator address
  region: "BY"
  # -- Additional street information of the operator address
  streetAdditional: ""
  # -- The street name of the operator address
  streetName: "Street"
  # -- The street number of the operator address
  streetNumber: "1"
  # -- The zipcode of the operator address
  zipCode: "0001"
  # -- The alpha 2 code of the operator address
  country_alpha2code: "DE"

frontend:
  ingress:
    # -- Portal frontend ingress parameters,
    # enable ingress record generation for portal frontend.
    enabled: false
    name: "frontend"
    # className: "nginx"
    ## Optional annotations when using the nginx ingress class
    # annotations:
    #   nginx.ingress.kubernetes.io/rewrite-target: "/$1"
    #   nginx.ingress.kubernetes.io/use-regex: "true"
    #   nginx.ingress.kubernetes.io/enable-cors: "true"
    #   # -- Provide CORS allowed origin.
    #   nginx.ingress.kubernetes.io/cors-allow-origin: "https://*.example.org"
    # -- Ingress TLS configuration
    tls:
      []
      # # -- Provide tls secret.
      # - secretName: ""
      #   # -- Provide host for tls secret.
      #   hosts:
      #     - ""
    hosts:
      # -- Provide default path for the ingress record.
      - host: ""
        paths:
          - path: "/(.*)"
            pathType: "Prefix"
            backend:
              service: "portal"
              port: 8080
          - path: "/registration/(.*)"
            pathType: "Prefix"
            backend:
              service: "registration"
              port: 8080
          - path: "/((assets|documentation)/.*)"
            pathType: "Prefix"
            backend:
              service: "assets"
              port: 8080
  portal:
    name: "portal"
    image:
      name: "docker.io/tractusx/portal-frontend"
      portaltag: 139e6919d4773a1d9f79b0c5a87458f52536deeb
      pullPolicy: "IfNotPresent"
      # -- Pull secrets for private docker registry
      pullSecrets: []
    # -- We recommend to review the default resource limits as this should a conscious choice.
    resources:
      requests:
        cpu: 25m
        memory: 125M
      limits:
        cpu: 75m
        memory: 125M
    requireHttpsUrlPattern: true
  registration:
    name: "registration"
    image:
      name: "docker.io/tractusx/portal-frontend-registration"
      registrationtag: 5f77b5de5f81cfe47b6908f9b77690afc2b50987
      pullPolicy: "IfNotPresent"
      # -- Pull secrets for private docker registry
      pullSecrets: []
    # -- We recommend to review the default resource limits as this should a conscious choice.
    resources:
      requests:
        cpu: 25m
        memory: 100M
      limits:
        cpu: 75m
        memory: 100M
  assets:
    name: "assets"
    image:
      name: "docker.io/tractusx/portal-assets"
      assetstag: 276986c1f99c8eafc6e5fc40067237c72a5c7162
      pullPolicy: "IfNotPresent"
      # -- Pull secrets for private docker registry
      pullSecrets: []
    # -- We recommend to review the default resource limits as this should a conscious choice.
    resources:
      requests:
        cpu: 25m
        memory: 100M
      limits:
        cpu: 45m
        memory: 100M
    path: "/assets"
  centralidpAuthPath: "/auth"

backend:
  ingress:
    # -- Portal-backend ingress parameters,
    # enable ingress record generation for portal-backend.
    enabled: false
    name: "backend"
    # className: "nginx"
    ## Optional annotations when using the nginx ingress class
    # annotations:
    #   nginx.ingress.kubernetes.io/use-regex: "true"
    #   nginx.ingress.kubernetes.io/enable-cors: "true"
    #   nginx.ingress.kubernetes.io/proxy-body-size: "8m"
    #   # -- Provide CORS allowed origin.
    #   nginx.ingress.kubernetes.io/cors-allow-origin: "https://*.example.org"
    # -- Ingress TLS configuration
    tls:
      []
      # # -- Provide tls secret.
      # - secretName: ""
      #   # -- Provide host for tls secret.
      #   hosts:
      #     - ""
    hosts:
      # -- Provide default path for the ingress record.
      - host: "portal-backend.example.org"
        paths:
          - path: "/api/registration"
            pathType: "Prefix"
            backend:
              service: "registration-service"
              port: 8080
          - path: "/api/administration"
            pathType: "Prefix"
            backend:
              service: "administration-service"
              port: 8080
          - path: "/api/notification"
            pathType: "Prefix"
            backend:
              service: "notification-service"
              port: 8080
          - path: "/api/provisioning"
            pathType: "Prefix"
            backend:
              service: "provisioning-service"
              port: 8080
          - path: "/api/apps"
            pathType: "Prefix"
            backend:
              service: "marketplace-app-service"
              port: 8080
          - path: "/api/services"
            pathType: "Prefix"
            backend:
              service: "services-service"
              port: 8080
  dotnetEnvironment: "Production"
  dbConnection:
    schema: "portal"
    sslMode: "Disable"
  portalHomePath: "/home"
  portalHelpPath: "/documentation"
  # -- The password resend logic is not yet implemented in the backend - this will currently lead to a 404 page when clicking on the link in the mail
  portalPasswordResendPath: "/home/passwordResend"
  portalIntroductionCompanyRolePath: "/companyroles"
  portalIntroductionDataspacePath: "/dataspace"
  userManagementPath: "/usermanagement"
  # -- Enable for using Decentral Identity Management (DIM) instead of Managed Identity Wallet (MIW) as wallet
  useDimWallet: false
  keycloak:
    # -- Secret containing the database-password and the client-secret for the connection to the centralidp (CX IAM) and the client-secret for the connection to the sharedidp (CX-IAM).
    secret: "portal-backend-keycloak"
    central:
      # -- Provide centralidp client-id from CX IAM centralidp.
      clientId: "central-client-id"
      # -- Client-secret for centralidp client-id. Secret-key 'central-client-secret'.
      clientSecret: ""
      jwtBearerOptions:
        requireHttpsMetadata: "true"
        metadataPath: "/auth/realms/CX-Central/.well-known/openid-configuration"
        tokenValidationParameters:
          validIssuerPath: "/auth/realms/CX-Central"
          validAudiencePortal: "Cl2-CX-Portal"
          validAudienceRegistration: "Cl1-CX-Registration"
          clockSkew: "00:05:00"
        refreshInterval: "00:00:30"
      tokenPath: "/auth/realms/CX-Central/protocol/openid-connect/token"
      # -- Flag if the api should be used with an leading /auth path
      useAuthTrail: true
    shared:
      # -- Provide sharedidp client-id from CX IAM sharedidp.
      clientId: "shared-client-id"
      # -- Client-secret for sharedidp client-id. Secret-key 'shared-client-secret'.
      clientSecret: ""
      authRealm: "master"
      # -- Flag if the api should be used with an leading /auth path
      useAuthTrail: true
  mailing:
    # -- Secret containing the passwords for backend.mailing and backend.provisioning.sharedRealm.
    secret: "portal-backend-mailing"
    # -- Provide host.
    host: "smtp.example.org"
    # -- Provide port.
    port: "587"
    # -- Provide user.
    user: "smtp-user"
    # -- Password for the smtp username. Secret-key 'password'.
    password: ""
    # -- The email which is set as a sender
    senderEmail: "email@example.org"
  interfaces:
    # -- Secret containing the client-secrets for the connection to custodian, bpdm, sdFactory, clearinghouse, offer provider and onboarding service provider.
    secret: "portal-backend-interfaces"
  healthChecks:
    startup:
      path: "/health/startup"
    liveness:
      path: "/healthz"
    readyness:
      path: "/ready"
  registration:
    name: "registration-service"
    image:
      name: "docker.io/tractusx/portal-registration-service"
      registrationservicetag: 4add998540b11eeaedd2c715af9272ca59986da4
      pullPolicy: "IfNotPresent"
      # -- Pull secrets for private docker registry
      pullSecrets: []
    # -- We recommend to review the default resource limits as this should a conscious choice.
    resources:
      requests:
        cpu: 75m
        memory: 400M
      limits:
        cpu: 225m
        memory: 400M
    basePath: "api/registration"
    logging:
      bpdmLibrary: "Information"
      registrationService: "Information"
      default: "Information"
    # -- Keycloak Healthcheck to be enabled for startupProbe;
    # once the centralidp Keycloak instance is available, enable healthcheck by uncommenting.
    healthChecks:
      startup:
        tags:
          # - name: "HEALTHCHECKS__0__TAGS__0"
          #   value: "keycloak"
          - name: "HEALTHCHECKS__0__TAGS__1"
            value: "portaldb"
    portalRegistrationPath: "/registration/"
    keycloakClientId: "Cl1-CX-Registration"
    applicationStatusIds:
      status0: "SUBMITTED"
      status1: "DECLINED"
      status2: "CONFIRMED"
    applicationDeclineStatusIds:
      status0: "CREATED"
      status1: "ADD_COMPANY_DATA"
      status2: "INVITE_USER"
      status3: "SELECT_COMPANY_ROLE"
      status4: "UPLOAD_DOCUMENTS"
      status5: "VERIFY"
    documentTypeIds:
      type0: "CX_FRAME_CONTRACT"
      type1: "COMMERCIAL_REGISTER_EXTRACT"
    swaggerEnabled: false
    registrationDocumentTypeIds:
      type0: "CX_FRAME_CONTRACT"
    submitDocumentTypeIds:
      type0: "COMMERCIAL_REGISTER_EXTRACT"
  administration:
    name: "administration-service"
    image:
      name: "docker.io/tractusx/portal-administration-service"
      administrationservicetag: 4add998540b11eeaedd2c715af9272ca59986da4
      pullPolicy: "IfNotPresent"
      # -- Pull secrets for private docker registry
      pullSecrets: []
    # -- We recommend to review the default resource limits as this should a conscious choice.
    resources:
      requests:
        cpu: 75m
        memory: 650M
      limits:
        cpu: 225m
        memory: 650M
    basePath: "api/administration"
    logging:
      businessLogic: "Information"
      sdfactoryLibrary: "Information"
      bpdmLibrary: "Information"
      custodianLibrary: "Information"
      default: "Information"
    # -- Keycloak Healthcheck to be enabled for startupProbe;
    # once the centralidp Keycloak instance is available, enable healthcheck by uncommenting.
    healthChecks:
      startup:
        tags:
          # - name: "HEALTHCHECKS__0__TAGS__0"
          #   value: "keycloak"
          - name: "HEALTHCHECKS__0__TAGS__1"
            value: "portaldb"
          - name: "HEALTHCHECKS__0__TAGS__2"
            value: "provisioningdb"
    companyData:
      useCaseParticipationMediaTypes:
        type0: "PDF"
      ssiCertificateMediaTypes:
        type0: "PDF"
      companyCertificateMediaTypes:
        type0: "PDF"
    issuerdid: "did:web:example.org:test123"
    connectors:
      validCertificationContentTypes:
        type0: "application/x-pem-file"
        type1: "application/x-x509-ca-cert"
        type2: "application/pkix-cert"
        type3: "application/octet-stream"
      selfDescriptionDocumentPath: /api/administration/documents/selfDescription
    identityProviderAdmin:
      csvSettings:
        fileName: "identityproviderlinks.csv"
        contentType: "text/csv"
        charset: "UTF-8"
        separator: ","
        headerUserId: "UserId"
        headerFirstName: "FirstName"
        headerLastName: "LastName"
        headerEmail: "Email"
        headerProviderAlias: "ProviderAlias"
        headerProviderUserId: "ProviderUserId"
        headerProviderUserName: "ProviderUserName"
      deleteIdpRoles:
        role0: "Company Admin"
        role1: "IT Admin"
      deactivateIdpRoles:
        role0: "Company Admin"
        role1: "IT Admin"
    registration:
      documentTypeIds:
        type0: "COMMERCIAL_REGISTER_EXTRACT"
    userManagement:
      companyUserStatusIds:
        status0: "ACTIVE"
        status1: "INACTIVE"
      userAdminRoles:
        role0: "Company Admin"
        role1: "IT Admin"
    serviceAccount:
      clientId: "technical_roles_management"
      encryptionConfigIndex: 0
      encryptionConfigs:
        index0:
          index: 0
          cipherMode: "CBC"
          paddingMode: "PKCS7"
          # -- EncryptionKey for service account creation. Secret-key 'serviceaccount-encryption-key0'.
          # Expected format is 256 bit (64 digits) hex.
          encryptionKey: ""
      dimCreationRoles:
        role0: "Identity Wallet Management"
      # -- Configuration for the technical user.
      # If a technical user profile contains a role which is configured here, it will be only visible for the provider
      userRolesAccessibleByProviderOnly:
        role0: "BPDM Pool Consumer"
        role1: "BPDM Sharing Output Consumer"
        role2: "BPDM Sharing Input Manager"
    swaggerEnabled: false
    frameDocumentTypeIds:
      type0: "CX_FRAME_CONTRACT"
  provisioning:
    centralRealmId: "CX-Central"
    invitedUserInitialRoles:
      registration: "Company Admin"
    serviceAccountClientPrefix: "sa"
    centralIdentityProvider:
      clientId: "central-idp"
    sharedRealmClient:
      clientId: "central-idp"
    sharedRealm:
      smtpServer:
        # -- Provide host.
        host: "smtp.example.org"
        # -- Provide port.
        port: "587"
        # -- Provide user.
        user: "smtp-user"
        # -- Password for the smtp username. Secret-key 'provisioning-sharedrealm-password'.
        password: ""
        ssl: ""
        startTls: "true"
        auth: "true"
        # -- Provide from.
        from: "smtp@example.org"
        # -- Provide replyTo.
        replyTo: "smtp@example.org"
  appmarketplace:
    name: "marketplace-app-service"
    image:
      name: "docker.io/tractusx/portal-marketplace-app-service"
      appmarketplaceservicetag: 4add998540b11eeaedd2c715af9272ca59986da4
      pullPolicy: "IfNotPresent"
      # -- Pull secrets for private docker registry
      pullSecrets: []
    # -- We recommend to review the default resource limits as this should a conscious choice.
    resources:
      requests:
        cpu: 75m
        memory: 500M
      limits:
        cpu: 225m
        memory: 500M
    basePath: "api/apps"
    logging:
      default: "Information"
      offersLibrary: "Information"
    # -- Keycloak Healthcheck to be enabled for startupProbe;
    # once the centralidp Keycloak instance is available, enable healthcheck by uncommenting.
    healthChecks:
      startup:
        tags:
          # - name: "HEALTHCHECKS__0__TAGS__0"
          #   value: "keycloak"
          - name: "HEALTHCHECKS__0__TAGS__1"
            value: "portaldb"
    appOverviewPath: "/appoverview"
    subscriptionPath: "/appsubscription"
    detailPath: "/appdetail"
    catenaAdminRoles:
      role0: "CX Admin"
    serviceAccountRoles:
      role0: "App Tech User"
    salesManagerRoles:
      role0: "Sales Manager"
    serviceManagerRoles:
      role0: "App Manager"
    subscriptionManagerRoles:
      role0: "App Manager"
      role1: "Sales Manager"
    activeAppCompanyAdminRoles:
      role0: "IT Admin"
      role1: "Company Admin"
    approveAppUserRoles:
      role0: "Sales Manager"
      role1: "App Manager"
    activationUserRoles:
      role0: "Sales Manager"
      role1: "App Manager"
    ITAdminRoles:
      role0: "IT Admin"
    uploadAppDocumentTypeIds:
      documentTypeId0: "APP_TECHNICAL_INFORMATION"
      mediaTypeIds0:
        mediaTypeId0: "PDF"
      documentTypeId1: "APP_LEADIMAGE"
      mediaTypeIds1:
        mediaTypeId0: "JPEG"
        mediaTypeId1: "PNG"
        mediaTypeId2: "SVG"
      documentTypeId2: "APP_IMAGE"
      mediaTypeIds2:
        mediaTypeId0: "JPEG"
        mediaTypeId1: "PNG"
        mediaTypeId2: "SVG"
      documentTypeId3: "APP_CONTRACT"
      mediaTypeIds3:
        mediaTypeId0: "PDF"
      documentTypeId4: "ADDITIONAL_DETAILS"
      mediaTypeIds4:
        mediaTypeId0: "PDF"
      documentTypeId5: "CONFORMITY_APPROVAL_BUSINESS_APPS"
      mediaTypeIds5:
        mediaTypeId0: "PDF"
    deleteDocumentTypeIds:
      type0: "APP_CONTRACT"
      type1: "ADDITIONAL_DETAILS"
      type2: "APP_TECHNICAL_INFORMATION"
      type3: "APP_LEADIMAGE"
      type4: "APP_IMAGE"
      type5: "CONFORMITY_APPROVAL_BUSINESS_APPS"
    submitAppDocumentTypeIds:
      type0: "APP_LEADIMAGE"
      type1: "APP_IMAGE"
      type2: "CONFORMITY_APPROVAL_BUSINESS_APPS"
    activeAppDocumentTypeIds:
      type0: "APP_IMAGE"
      type1: "APP_TECHNICAL_INFORMATION"
      type2: "APP_CONTRACT"
      type3: "ADDITIONAL_DETAILS"
    deleteActiveAppDocumentTypeIds:
      type0: "APP_IMAGE"
      type1: "APP_TECHNICAL_INFORMATION"
      type2: "APP_CONTRACT"
      type3: "ADDITIONAL_DETAILS"
    uploadActiveAppDocumentTypeIds:
      documentTypeId0: "APP_IMAGE"
      mediaTypeIds0:
        mediaTypeId0: "JPEG"
        mediaTypeId1: "PNG"
      documentTypeId1: "APP_TECHNICAL_INFORMATION"
      mediaTypeIds1:
        mediaTypeId0: "PDF"
      documentTypeId2: "APP_CONTRACT"
      mediaTypeIds2:
        mediaTypeId0: "PDF"
      documentTypeId3: "ADDITIONAL_DETAILS"
      mediaTypeIds3:
        mediaTypeId0: "PDF"
    notificationTypeIds:
      type0: "APP_RELEASE_REQUEST"
    activeAppNotificationTypeIds:
      type0: "APP_ROLE_ADDED"
    submitAppNotificationTypeIds:
      type0: "APP_RELEASE_REQUEST"
    approveAppNotificationTypeIds:
      type0: "APP_RELEASE_APPROVAL"
    appImageDocumentTypeIds:
      type0: "APP_LEADIMAGE"
      type1: "APP_IMAGE"
      type2: "APP_CONTRACT"
      type3: "ADDITIONAL_DETAILS"
      type4: "APP_TECHNICAL_INFORMATION"
      type5: "CONFORMITY_APPROVAL_BUSINESS_APPS"
    offerStatusIds:
      status0: "IN_REVIEW"
      status1: "ACTIVE"
    swaggerEnabled: false
    technicalUserProfileClient: "technical_roles_management"
    companyAdminRoles:
      role0: "Company Admin"
  portalmigrations:
    name: "portal-migrations"
    image:
      name: "docker.io/tractusx/portal-portal-migrations"
      portalmigrationstag: 4add998540b11eeaedd2c715af9272ca59986da4
      pullPolicy: "IfNotPresent"
      # -- Pull secrets for private docker registry
      pullSecrets: []
    # -- We recommend to review the default resource limits as this should a conscious choice.
    resources:
      requests:
        cpu: 75m
        memory: 350M
      limits:
        cpu: 225m
        memory: 350M
    seeding:
      # -- Enables dynamic seeding of information related to the operator company: operator.bpn, operator.name, operator.city etc.;
      # If set to `true` the data configured in the config map 'configmap-seeding-initialdata.yaml' will be taken to insert the initial data;
      useInitial: true
      # -- Option to seed test data provided in a configMap
      seedTestData:
        # -- If set to true the data configured in the config map 'configmap-backend-seeding-testdata.yaml' will be taken to insert the default test data
        useDefault: false
        useOwnConfigMap:
          # -- ConfigMap containing json files for the tables to seed, e.g. companies.test.json, addresses.test.json, etc.
          configMap: ""
          # -- Filename identifying the test data files e.g. for companies.test.json the value would be "test"
          filename: ""
    logging:
      default: "Information"
  portalmaintenance:
    name: "portal-maintenance"
    image:
      name: "docker.io/tractusx/portal-maintenance-service"
      portalmaintenancetag: 4add998540b11eeaedd2c715af9272ca59986da4
      pullPolicy: "IfNotPresent"
      # -- Pull secrets for private docker registry
      pullSecrets: []
    # -- We recommend to review the default resource limits as this should a conscious choice.
    resources:
      requests:
        cpu: 25m
        memory: 200M
      limits:
        cpu: 75m
        memory: 200M
    processIdentity:
      processUserId: d21d2e8a-fe35-483c-b2b8-4100ed7f0953
    batchProcessing:
      # -- The maximum days a document can stay in state DELETED before it is removed from the database
      deleteDocuments:
        days: 80
      # -- Defines the days a AWAIT_CLEARING_HOUSE_RESPONSE process can stay in state TODO before the process is retriggered
      retriggerClearinghouse:
        days: 30
    logging:
      default: "Information"
  notification:
    name: "notification-service"
    image:
      name: "docker.io/tractusx/portal-notification-service"
      notificationservicetag: 4add998540b11eeaedd2c715af9272ca59986da4
      pullPolicy: "IfNotPresent"
      # -- Pull secrets for private docker registry
      pullSecrets: []
    # -- We recommend to review the default resource limits as this should a conscious choice.
    resources:
      requests:
        cpu: 75m
        memory: 200M
      limits:
        cpu: 225m
        memory: 200M
    basePath: "api/notification"
    # -- Keycloak Healthcheck to be enabled for startupProbe;
    # once the centralidp Keycloak instance is available, enable healthcheck by uncommenting.
    healthChecks:
      startup:
        tags:
          # - name: "HEALTHCHECKS__0__TAGS__0"
          #   value: "keycloak"
          - name: "HEALTHCHECKS__0__TAGS__1"
            value: "portaldb"
    swaggerEnabled: false
    logging:
      default: "Information"
  services:
    name: "services-service"
    image:
      name: "docker.io/tractusx/portal-services-service"
      servicesservicetag: 4add998540b11eeaedd2c715af9272ca59986da4
      pullPolicy: "IfNotPresent"
      # -- Pull secrets for private docker registry
      pullSecrets: []
    # -- We recommend to review the default resource limits as this should a conscious choice.
    resources:
      requests:
        cpu: 75m
        memory: 500M
      limits:
        cpu: 225m
        memory: 500M
    basePath: "api/services"
    logging:
      default: "Information"
      offersLibrary: "Information"
    # -- Keycloak Healthcheck to be enabled for startupProbe;
    # once the centralidp Keycloak instance is available, enable healthcheck by uncommenting.
    healthChecks:
      startup:
        tags:
          # - name: "HEALTHCHECKS__0__TAGS__0"
          #   value: "keycloak"
          - name: "HEALTHCHECKS__0__TAGS__1"
            value: "portaldb"
    serviceOverviewPath: "/serviceoverview"
    subscriptionPath: "/servicesubscription"
    detailPath: "/servicedetail"
    catenaAdminRoles:
      role0: "CX Admin"
    serviceAccountRoles:
      role0: "App Tech User"
    salesManagerRoles:
      role0: "Sales Manager"
    serviceManagerRoles:
      role0: "Service Manager"
    subscriptionManagerRoles:
      role0: "Service Manager"
      role1: "Sales Manager"
    approveServiceUserRoles:
      role0: "Sales Manager"
      role1: "Service Manager"
    activationUserRoles:
      role0: "Sales Manager"
      role1: "Service Manager"
    ITAdminRoles:
      role0: "IT Admin"
    uploadServiceDocumentTypeIds:
      documentTypeId0: "ADDITIONAL_DETAILS"
      mediaTypeIds0:
        mediaTypeId0: "PDF"
      documentTypeId1: "SERVICE_LEADIMAGE"
      mediaTypeIds1:
        mediaTypeId0: "JPEG"
        mediaTypeId1: "PNG"
        mediaTypeId2: "SVG"
      documentTypeId2: "CONFORMITY_APPROVAL_SERVICES"
      mediaTypeIds2:
        mediaTypeId0: "PDF"
    submitServiceNotificationTypeIds:
      type0: "SERVICE_RELEASE_REQUEST"
    approveServiceNotificationTypeIds:
      type0: "SERVICE_RELEASE_APPROVAL"
    swaggerEnabled: false
    serviceImageDocumentTypeIds:
      type0: "ADDITIONAL_DETAILS"
      type1: "CONFORMITY_APPROVAL_SERVICES"
      type2: "SERVICE_LEADIMAGE"
    offerStatusIds:
      status0: "IN_REVIEW"
      status1: "ACTIVE"
    deleteDocumentTypeIds:
      type0: "SERVICE_LEADIMAGE"
      type1: "ADDITIONAL_DETAILS"
      type2: "CONFORMITY_APPROVAL_SERVICES"
    technicalUserProfileClient: "technical_roles_management"
    companyAdminRoles:
      role0: "Company Admin"
  provisioningmigrations:
    name: "provisioning-migrations"
    image:
      name: "docker.io/tractusx/portal-provisioning-migrations"
      provisioningmigrationstag: 4add998540b11eeaedd2c715af9272ca59986da4
      pullPolicy: "IfNotPresent"
      # -- Pull secrets for private docker registry
      pullSecrets: []
    # -- We recommend to review the default resource limits as this should a conscious choice.
    resources:
      requests:
        cpu: 25m
        memory: 200M
      limits:
        cpu: 75m
        memory: 200M
    logging:
      default: "Information"
  processesworker:
    name: "processes-worker"
    image:
      name: "docker.io/tractusx/portal-processes-worker"
      processesworkertag: 4add998540b11eeaedd2c715af9272ca59986da4
      pullPolicy: "IfNotPresent"
      # -- Pull secrets for private docker registry
      pullSecrets: []
    # -- We recommend to review the default resource limits as this should a conscious choice.
    resources:
      requests:
        cpu: 75m
        memory: 600M
      limits:
        cpu: 225m
        memory: 600M
    logging:
      default: "Information"
      processesLibrary: "Information"
      bpdmLibrary: "Information"
      clearinghouseLibrary: "Information"
      custodianLibrary: "Information"
      sdfactoryLibrary: "Information"
      offerProvider: "Information"
    applicationActivation:
      applicationApprovalInitialRoles:
        portal:
          role0: "Company Admin"
        registration:
          role0: "Company Admin"
      clientToRemoveRolesOnActivation:
        client0: "Cl1-CX-Registration"
      welcomeNotificationTypeIds:
        type0: "WELCOME"
        type1: "WELCOME_USE_CASES"
        type2: "WELCOME_SERVICE_PROVIDER"
        type3: "WELCOME_CONNECTOR_REGISTRATION"
        type4: "WELCOME_APP_MARKETPLACE"
      loginTheme: "catenax-shared-portal"
    bpdm:
      scope: "openid"
      grantType: "client_credentials"
      # -- Provide bpdm client-id from CX IAM centralidp.
      clientId: "bpdm-client-id"
      # -- Client-secret for bpdm client-id. Secret-key 'bpdm-client-secret'.
      clientSecret: ""
      # -- When set to true the call to set sharing state ready is skipped. This means that BPDM needs to set the state manually.
      # When set to false, the process worker will trigger the set sharing state ready of BPDM, which means no manual interference on BPDM site is needed.
      # This value should be aligned with the value set in the BPDM helm chart creation -> '.fromSharingMember.starts-as-ready'; if the values are not aligned the BPDM application checklist will fail.
      startSharingStateAsReady: true
    custodian:
      membershipErrorMessage: "Credential of type MembershipCredential is already exists"
      scope: "openid"
      grantType: "client_credentials"
      # -- Provide custodian client-id from CX IAM centralidp.
      clientId: "custodian-client-id"
      # -- Client-secret for custodian client-id. Secret-key 'custodian-client-secret'.
      clientSecret: ""
    sdfactory:
      selfdescriptionPath: "/api/tagus/selfdescription"
      scope: "openid"
      grantType: "client_credentials"
      # -- Provide sdfactory client-id from CX IAM centralidp.
      clientId: "sdfactory-client-id"
      # -- Client-secret for sdfactory client-id. Secret-key 'sdfactory-client-secret'.
      clientSecret: ""
    clearinghouse:
      callbackPath: "/api/administration/registration/clearinghouse"
    processes:
      lockExpirySeconds: "300"
    offerSubscriptionProcess:
      serviceAccountRoles:
        role0: "Digital Twin Management"
      serviceManagerRoles:
        role0: "App Manager"
      itAdminRoles:
        role0: "IT Admin"
    offerprovider:
      serviceManagerRoles:
        role0: "App Manager"
      scope: "openid"
      grantType: "client_credentials"
      # -- Provide offerprovider client-id from CX IAM centralidp.
      clientId: "offerprovider-client-id"
      # -- Client-secret for offer provider client-id. Secret-key 'offerprovider-client-secret'.
      clientSecret: ""
      encryptionConfigIndex: 0
      encryptionConfigs:
        index0:
          index: 0
          cipherMode: "CBC"
          paddingMode: "PKCS7"
          # -- EncryptionKey for offer provider auto setup authentication. Secret-key 'offerprovider-encryption-key0'.
          # Expected format is 256 bit (64 digits) hex.
          encryptionKey: ""
    processIdentity:
      processUserId: d21d2e8a-fe35-483c-b2b8-4100ed7f0953
    onboardingServiceProvider:
      encryptionConfigIndex: 1
      encryptionConfigs:
        index0:
          index: 0
          cipherMode: "ECB"
          paddingMode: "PKCS7"
          # -- EncryptionKey for onboardingserviceprovider. Secret-key 'onboardingserviceprovider-encryption-key0'.
          # Expected format is 256 bit (64 digits) hex. When upgrading from v2.0.0-RC1 please read document portal-upgrade-details.md
          encryptionKey: ""
        index1:
          index: 1
          cipherMode: "CBC"
          paddingMode: "PKCS7"
          # -- EncryptionKey for onboardingserviceprovider. Secret-key 'onboardingserviceprovider-encryption-key1'.
          # Expected format is 256 bit (64 digits) hex. When upgrading from v2.0.0-RC1 please read document portal-upgrade-details.md
          encryptionKey: ""
    networkRegistration:
      loginDocumentPath: "/documentation/?path=docs%2F09.+Others%28s%29%2F01.+Login.md"
      externalRegistrationPath: "/consentOsp"
      # -- The logic to decline an application is not yet implemented in the backend - this will currently lead to a 404 page when clicking on the link in the mail
      closeApplicationPath: "/decline"
    dim:
      # -- Provide dim client-id from CX IAM centralidp.
      clientId: "dim-client-id"
      # -- Client-secret for dim client-id. Secret-key 'dim-client-secret'.
      clientSecret: ""
      grantType: "client_credentials"
      scope: "openid"
      # -- Base address of the DIM Middle Layer
      baseAddress: "https://dim.example.org"
      # -- Url of a public available universal resolver to validate the did and did document
      universalResolverAddress: "https://resolver.example.org/did"
      # -- path where the did document will be hosted
      didDocumentPath: "/api/administration/staticdata/did"
      maxValidationTimeInDays: 7
      encryptionConfigIndex: 0
      encryptionConfigs:
        index0:
          index: 0
          cipherMode: "CBC"
          paddingMode: "PKCS7"
          # -- EncryptionKey for dim wallet creation. Secret-key 'dim-encryption-key0'.
          # Expected format is 256 bit (64 digits) hex.
          encryptionKey: ""
    issuerComponent:
      # -- Provide dim client-id from CX IAM centralidp.
      clientId: "issuercomponent-client-id"
      # -- Client-secret for dim client-id. Secret-key 'issuercomponent-client-secret'.
      clientSecret: ""
      grantType: "client_credentials"
      scope: "openid"
    bpnDidResolver:
      # -- ApiKey for management endpoint of the bpnDidResolver. Secret-key 'bpndidresolver-api-key'.
      apiKey: ""
    invitation:
      invitedUserInitialRoles:
        role0: "Company Admin"
      initialLoginTheme: "catenax-shared"
      closeApplicationPath: "/decline"
      encryptionConfigIndex: 0
      encryptionConfigs:
        index0:
          index: 0
          cipherMode: "CBC"
          paddingMode: "PKCS7"
          # -- EncryptionKey to encrypt the company-invitation client-secret. Secret-key 'invitation-encryption-key0'.
          # Expected format is 256 bit (64 digits) hex.
          encryptionKey: ""
    mailing:
      encryptionConfigIndex: 0
      encryptionConfigs:
        index0:
          index: 0
          cipherMode: "CBC"
          paddingMode: "PKCS7"
          # -- EncryptionKey to encrypt the parameters of mailing processes. Secret-key 'mailing-encryption-key0'.
          # Expected format is 256 bit (64 digits) hex.
          encryptionKey: ""
  placeholder: "empty"

postgresql:
  # -- PostgreSQL chart configuration
  # Switch to enable or disable the PostgreSQL helm chart
  enabled: true
  # -- Setting image tag to major to get latest minor updates
  image:
    tag: "15-debian-11"
  commonLabels:
    app.kubernetes.io/version: "15"
  auth:
    # -- Database name
    database: "postgres"
    # -- Database port number
    port: 5432
    # -- Secret containing the passwords for root usernames postgres and non-root usernames repl_user, portal and provisioning.
    existingSecret: "portal-postgres"
    # -- Password for the root username 'postgres'. Secret-key 'postgres-password'.
    password: ""
    # -- Password for the non-root username 'repl_user'. Secret-key 'replication-password'.
    replicationPassword: ""
    # -- Non-root username for portal.
    portalUser: "portal"
    # -- Non-root username for provisioning.
    provisioningUser: "provisioning"
    # -- Password for the non-root username 'portal'. Secret-key 'portal-password'.
    portalPassword: ""
    # -- Password for the non-root username 'provisioning'. Secret-key 'provisioning-password'.
    provisioningPassword: ""
  architecture: "replication"
  audit:
    pgAuditLog: "write, ddl"
    logLinePrefix: "%m %u %d "
  primary:
    # -- Extended PostgreSQL Primary configuration (increase of max_connections recommended - default is 100)
    extendedConfiguration: ""
    initdb:
      scriptsConfigMap: "{{ .Release.Name }}-portal-cm-postgres"
    extraEnvVars:
      - name: "PORTAL_PASSWORD"
        valueFrom:
          secretKeyRef:
            name: "{{ .Values.auth.existingSecret }}"
            key: "portal-password"
      - name: "PROVISIONING_PASSWORD"
        valueFrom:
          secretKeyRef:
            name: "{{ .Values.auth.existingSecret }}"
            key: "provisioning-password"
  readReplicas:
    # -- Extended PostgreSQL read only replicas configuration (increase of max_connections recommended - default is 100)
    extendedConfiguration: ""

externalDatabase:
  # -- External PostgreSQL configuration
  # IMPORTANT: init scripts (01-init-db-user.sh and 02-init-db.sql) available
  # in templates/configmap-backend-postgres-init.yaml need to be executed beforehand.
  # Database host
  host: "portal-backend-postgresql-external-db"
  # -- Database name
  database: "postgres"
  # -- Database port number
  port: 5432
  # -- Secret containing the passwords non-root usernames portal and provisioning.
  secret: "portal-postgres-external-db"
  # -- Non-root username for portal.
  portalUser: "portal"
  # -- Non-root username for provisioning.
  provisioningUser: "provisioning"
  # -- Password for the non-root username 'portal'. Secret-key 'portal-password'.
  portalPassword: ""
  # -- Password for the non-root username 'provisioning'. Secret-key 'provisioning-password'.
  provisioningPassword: ""

portContainer: 8080

portService: 8080

replicaCount: 3

# -- Node labels for pod assignment
nodeSelector: {}

# -- Tolerations for pod assignment
tolerations: []

affinity:
  # -- Following Catena-X Helm Best Practices,
  # [reference](https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity).
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchExpressions:
              - key: app.kubernetes.io/name
                operator: DoesNotExist
          topologyKey: kubernetes.io/hostname

updateStrategy:
  # -- Update strategy type,
  # rolling update configuration parameters,
  # [reference](https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#update-strategies).
  type: RollingUpdate
  rollingUpdate:
    maxSurge: 1
    maxUnavailable: 0

# -- Following Catena-X Helm Best Practices,
# [reference](https://github.com/helm/charts/blob/master/stable/nginx-ingress/values.yaml#L210).
startupProbe:
  failureThreshold: 30
  initialDelaySeconds: 10
  periodSeconds: 10
  successThreshold: 1
  timeoutSeconds: 1
livenessProbe:
  failureThreshold: 3
  initialDelaySeconds: 10
  periodSeconds: 10
  successThreshold: 1
  timeoutSeconds: 10
readinessProbe:
  failureThreshold: 3
  initialDelaySeconds: 10
  periodSeconds: 10
  successThreshold: 1
  timeoutSeconds: 1
